# Notificando o sistema legado do bloqueio do nosso cartão

## Objetivo

Precisamos notificar o sistema legado do banco, que houve um bloqueio no cartão. Para que de fato o cartão esteja 
bloqueado em todos os canais de venda.

#### Necessidades

Notificar o sistema bancário que o usuário solicitou o bloqueio do cartão a fim de garantir o bloqueio em todos os 
canais de utilização do mesmo.

Fazer a chamada do sistema legado bancário no endereço `http://localhost:8888/api/cartoes/{id}/bloqueios` e com base 
no resultado aplicar as regras.

#### Restrições

Identificador do cartão é obrigatório.

#### Resultado Esperado

- Quando o retorno do sistema bancário for positivo (200) alterar o estado do cartão para "BLOQUEADO".
- Quando o retorno do sistema bancário for negativo (400/500) nao alterar o estado do cartão.

## Informações de suporte

* Está com dúvida, sobre o formato de documentação das APIs do serviço de accounts? [Aqui tem uma explicação do que entendemos que você deve considerar!](http://spec.openapis.org/oas/v3.0.3)
    
    * Teve dificuldade com a documentação? Não tem problema! [Aqui você encontra um playground para aprimorar sua habilidade!](https://editor.swagger.io/)

* Está em dúvida sobre o que significa a expressão "tempo periódico"? [Aqui tem uma explicação do que entendemos que você deve considerar!](../informacao_procedural/synchronous-vs-asynchronous.md)

* Está em dúvida em como associar o cartão em "tempo periódico"? Olha que interessante, já existe um projeto \ módulo no Spring 
que pensou só nisso! [Aqui você encontra como fazer isso !!!](https://docs.spring.io/spring/docs/current/spring-framework-reference/integration.html#scheduling-enable-annotation-support)

    * Teve dificuldade com a documentação? Não tem problema! [Aqui você encontra como fazer isso !!!](../informacao_suporte/spring-schedule.md)
    
* Está em dúvida em como consultar as propostas com sucesso e sem cartão associado? [Aqui você encontra como fazer isso !!!](../informacao_suporte/spring-data-query-methods.md)
    
* Está em dúvida em como consultar se o cartão foi gerado com sucesso? Olha que interessante, já existe um projeto \ 
módulo no Spring que pensou só nisso! [Aqui você encontra como fazer isso !!!](https://cloud.spring.io/spring-cloud-openfeign/2.2.x/reference/html/#spring-cloud-feign)

    * Teve dificuldade com a documentação? Não tem problema! [Aqui você encontra como fazer isso !!!](../informacao_suporte/spring-schedule.md) **FIXME LURAM - Feign Cláudio**

* Talvez seu código não está funcionando e está com dificuldade de encontrar o problema? Aprenda mais sobre logs! [Aqui você encontra como fazer isso !!!](../informacao_suporte/spring-logging.md)

* Um momento, como eu posso declarar o endereço do serviço externo, é so colocar fixo??? Acho que não, [existe uma prática que nos
ajuda com isso!!!](../informacao_procedural/twelve-factor-config.md)

## Sugestões de busca de conteúdo

Quando falamos de tecnologias, precisamos buscar as maiores autoridades no assunto para analisar o que aquelas pessoas 
pensaram quando criaram tal tecnologia. Aqui neste funcionalidade encostamos no Spring Schedule, Feign, etc. 

Claro que usamos apenas uma parte do que está lá, mas já vá se acostumando a ler as documentações das tecnologias. 
Vamos deixar aqui alguns links para você:

* [Feign](https://github.com/OpenFeign/feign)
* [RestTemplate](https://docs.spring.io/spring-android/docs/current/reference/html/rest-template.html)
* [The Twelve-Factor App](https://12factor.net/pt_br/)