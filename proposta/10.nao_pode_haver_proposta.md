# Não pode haver mais de uma proposta para o mesmo solicitante

## Objetivo

Criamos o fluxo de geração de proposta, porém nosso cliente solicitou uma alteração, na qual é adicionar uma nova 
validação na qual não podemos permitir que tenha duas propostas para o mesmo solicitante, ou seja, para o mesmo 
CNPJ ou CPF.

## Descrição

Lorem ipsum dolor sit amet, consectetur adipiscing elit. In feugiat, diam quis lobortis placerat, orci nibh sodales nunc, eget dictum augue sapien vel leo. Ut lacinia nunc ipsum, ac suscipit dui fringilla a. Donec sed bibendum dolor. Ut faucibus, nibh ac suscipit pretium, orci sem dapibus mauris, a rhoncus justo dui eget felis. Nullam aliquet vitae eros ut sagittis. Suspendisse a suscipit ligula, ut faucibus leo. Donec eu molestie nulla. Proin arcu eros, elementum at consequat ac, fringilla at mi. Quisque laoreet in est id auctor. Etiam vehicula lacus ante, ac fermentum neque condimentum ac. Nullam luctus dui at mi commodo placerat. Maecenas quis rhoncus dui. Duis id nisi luctus, dignissim quam eu, vehicula turpis. Vestibulum et ornare nunc. Sed vehicula diam ut lacus iaculis, et aliquet massa tristique.

#### Resultado Esperado

Não podemos permitir que tenha duas propostas para o mesmo solicitante, ou seja, para o mesmo 
CNPJ ou CPF.

- Devemos retornar o status code **422**, quando o solicitante ja requisitou uma proposta.
- Permitir a criação de uma proposta, caso o solicitante não tenha nenhuma outra.

## Informações Importantes

Como efetuar uma query no banco por uma coluna específica no Spring?

FIXME

Como retornar um status code no Spring?

FIXME

Por que **422**  no retorno dessa chamada?

Quer entender um pouco mais do modelo arquitetural REST [Clique Aqui!!](../informacao_procedural/rest.md)

## Informações para criação do conteúdo

### Yuri

I.P. - Como o Spring ajuda a fazer queries

existsByDocumento

https://www.baeldung.com/the-persistence-layer-with-spring-data-jpa

Como lidar com os retornos

422 Unprocessable Entity: The request was well-formed but was unable to be followed due to semantic errors.

return ResponseEntity.unprocessableEntity().build();